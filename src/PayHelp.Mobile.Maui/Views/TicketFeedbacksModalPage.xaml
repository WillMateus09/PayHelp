<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PayHelp.Mobile.Maui.Views.TicketFeedbacksModalPage"
             BackgroundColor="Transparent">
    <Grid BackgroundColor="#80000000" Padding="20">
        <Grid.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnClose"/>
        </Grid.GestureRecognizers>

        <Frame BackgroundColor="White"
               CornerRadius="16"
               Padding="24"
               MaximumWidthRequest="520"
               VerticalOptions="Center"
               HorizontalOptions="Center"
               HasShadow="True">
            <Frame.GestureRecognizers>
                <TapGestureRecognizer/>
            </Frame.GestureRecognizers>

            <Grid RowDefinitions="Auto,Auto,* ,Auto" RowSpacing="16">
                <Label Grid.Row="0"
                       Text="Feedbacks do Chamado"
                       FontSize="20"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"/>

                <Label Grid.Row="1"
                       x:Name="LblCount"
                       TextColor="#666"
                       HorizontalOptions="Center"/>

                <CollectionView Grid.Row="2" x:Name="List"
                                ItemsLayout="VerticalList"
                                VerticalOptions="FillAndExpand">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Style="{StaticResource Card}" Padding="12" Margin="0,0,0,12">
                                <VerticalStackLayout Spacing="8">
                                    <Grid ColumnDefinitions="*,Auto" >
                                        <Label Text="{Binding DataCriacaoUtc, StringFormat='{0:dd/MM/yyyy HH:mm}'}"
                                               Style="{StaticResource Caption}"/>
                                        <Label Grid.Column="1" Text="{Binding Nota, StringFormat='â­ {0}'}" FontAttributes="Bold"/>
                                    </Grid>
                                    <Label Text="{Binding Comentario}" Style="{StaticResource Body}"/>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                    <CollectionView.EmptyView>
                        <VerticalStackLayout Spacing="12" Padding="20" HorizontalOptions="Center" VerticalOptions="Center">
                            <Label Text="ðŸ“­" FontSize="48" HorizontalOptions="Center"/>
                            <Label Text="Nenhum feedback para este chamado"/>
                        </VerticalStackLayout>
                    </CollectionView.EmptyView>
                </CollectionView>

                <Button Grid.Row="3" Text="Fechar" Style="{StaticResource SmallButton}" Clicked="OnClose"/>
            </Grid>
        </Frame>
    </Grid>
</ContentPage>
